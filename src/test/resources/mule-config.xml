<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:spring="http://www.springframework.org/schema/beans"
  xmlns:cloudamqp="http://www.mulesoft.org/schema/mule/cloudamqp"
  xsi:schemaLocation="
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
  http://www.mulesoft.org/schema/mule/cloudamqp http://www.mulesoft.org/schema/mule/cloudamqp/1.0-SNAPSHOT/mule-cloudamqp.xsd">

  <cloudamqp:config host="localhost" vhost="/" username="guest" password="guest"/>

  <flow name="simple-publish">
    <cloudamqp:publish-message queue="myQueue" message="A message"/>
  </flow>

  <flow name="simple-receive">
    <cloudamqp:receive-messages queue="myQueue" />
    <logger message="### #[payload]" level="INFO" />
  </flow>

  <flow name="publish-topic">
    <cloudamqp:publish-topic-message topic="topic1" message="A message"/>
  </flow>

  <flow name="receive-topic">
    <cloudamqp:receive-topic-messages topic="topic1" />
    <logger message="### #[payload]" level="INFO" />
  </flow>
</mule>
